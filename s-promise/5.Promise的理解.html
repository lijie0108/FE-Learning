<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // Promise是什么？ Promise是JS中进行异步编程的新的解决方案
    // Promise是一个构造函数，promise对象用来封装一个异步操作并可以获取其结果
    /**
      Promise状态改变
      pending变为resolved
      pending变为rejected

      一个promise对象只能改变一次
      无论为成功还是失败，都会有一个结果数据
    */

    // 1.创建Promise
    const p = new Promise((resolve, reject) => { // 执行器函数
      // 2.执行异步操作任务
      setTimeout(() => {
        const time = +Date.now(); // 如果当前时间是偶数成功，否则失败
        if(time % 2 == 0) {
          resolve('成功的数据, time=' + time)
        }else {
          reject('失败的数据, time=' + time)
        }
      }, 1000)
      // 3.1如果成功了，调用resolve(value)
      // 3.2如果失败了，调用reject(err)
    })

    p.then(value=> {
      // 接收得到成功的数据
      console.log('成功的回调, ' + value)
    }, reason=> {
      // 接收得到失败的数据
      console.log('失败的回调, ' + reason)
    })
  </script>
</body>
</html>